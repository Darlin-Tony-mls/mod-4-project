(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(e){if(e.ep)return;e.ep=!0;const a=o(e);fetch(e.href,a)}})();async function u(){try{const t=await fetch("https://api.artic.edu/api/v1/artworks");if(!t.ok)throw Error(`Failed to load artwork${t.status} ${t.statusText}`);const r=await t.json();return console.log(r.data),{data:r.data,error:null}}catch(t){return console.warn("Error caught",t),{data:null,error:t}}}async function d(t){try{const r=await fetch(`https://api.artic.edu/api/v1/artworks/${t}`);if(!r.ok)throw Error(`Failed to load artwork ID ${r.status} ${r.statusText}`);const o=await r.json();return console.log(o.data),{data:o.data,error:null}}catch(r){return console.warn("Looks like we've got an Error!",r),{data:null,error:r}}}async function f(t){try{const r=await fetch(`https://api.artic.edu/api/v1/artworks/search?q=${t}`);if(!r.ok)throw Error(`Fetch failed ${r.status} ${r.statusText}`);const o=await r.json();return console.log(o),{data:o.data,error:null}}catch(r){return{data:null,error:r}}}const l=t=>{const r=document.querySelector("#artwork-list");r.innerHTML="",t.forEach(o=>{const n=document.createElement("li");n.textContent=o.title,n.dataset.id=o.id,r.append(n)})},p=t=>{const r=document.querySelector("#artwork-detail");r.innerHTML=`
        <h2>${t.title}</h2>
        <p>${t.artist_display}</p>
        <p>${t.date_display}</p>
        <p>${t.medium_display}</p>`};async function w(){let{data:t,error:r}=await u();if(r)return console.warn("Sorry seems like there's been an error!",r);l(t),document.querySelector("#artwork-list").addEventListener("click",async n=>{const e=n.target.closest("li");if(!e)return;const a=e.dataset.id,{data:s,error:c}=await d(a);if(c)return console.warn("Error fetching artwork details",c);p(s)})}w();const i=document.querySelector("#search-form");i.addEventListener("submit",async t=>{t.preventDefault();const o=document.querySelector("#search").value,{data:n,error:e}=await f(o);if(e)return console.warn("search error",e);l(n),i.reset()});
