(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}})();async function f(){try{const e=await fetch("https://api.artic.edu/api/v1/artworks");if(!e.ok)throw Error(`Failed to load artwork${e.status} ${e.statusText}`);const t=await e.json();return console.log(t.data),{data:t.data,error:null}}catch(e){return console.warn("Error caught",e),{data:null,error:e}}}async function p(e){try{const t=await fetch(`https://api.artic.edu/api/v1/artworks/${e}`);if(!t.ok)throw Error(`Failed to load artwork ID ${t.status} ${t.statusText}`);const o=await t.json();return console.log(o.data),{data:o.data,error:null}}catch(t){return console.warn("Looks like we've got an Error!",t),{data:null,error:t}}}async function m(e){try{const t=await fetch(`https://api.artic.edu/api/v1/artworks/search?q=${e}`);if(!t.ok)throw Error(`Fetch failed ${t.status} ${t.statusText}`);const o=await t.json();return console.log(o),{data:o.data,error:null}}catch(t){return{data:null,error:t}}}const a=()=>{const e=localStorage.getItem("favorites");return e?JSON.parse(e):[]},g=e=>{const t=a();t.includes(e)||(t.push(e),localStorage.setItem("favorites",JSON.stringify(t)))},h=e=>{const o=a().filter(s=>s!==e);localStorage.setItem("favorites",JSON.stringify(o))},u=e=>{const t=document.querySelector("#artwork-list");t.innerHTML="",e.forEach(o=>{const s=document.createElement("li"),r=o.image_id?`https://www.artic.edu/iiif/2/${o.image_id}/full/300,/0/default.jpg`:"";s.dataset.id=o.id,s.innerHTML=`
            <h3>${o.title}</h3>
            ${o.image_id?`<img src="${r}" alt="${o.title}">`:""}
        `,t.append(s)})},d=e=>{const t=document.querySelector("#artwork-detail"),s=a().includes(e.id),r=e.image_id?`https://www.artic.edu/iiif/2/${e.image_id}/full/843,/0/default.jpg`:"";t.innerHTML=`
        <h2>${e.title}</h2>
        ${e.image_id?`<img src="${r}" alt="${e.title}">`:""}
        <p>${e.artist_display}</p>
        <p>${e.date_display}</p>
        <p>${e.medium_display}</p>
        <button id="fave-btn">
            ${s?"‚ù§Ô∏è Unfavorite":"ü§ç Favorite"}
        </button>
    `,document.querySelector("#fave-btn").addEventListener("click",()=>{s?h(e.id):g(e.id),d(e)})};async function w(){let{data:e,error:t}=await f();if(t)return console.warn("Sorry seems like there's been an error!",t);u(e),document.querySelector("#artwork-list").addEventListener("click",async s=>{const r=s.target.closest("li");if(!r)return;const i=r.dataset.id,{data:n,error:c}=await p(i);if(c)return console.warn("Error fetching artwork details",c);d(n)})}w();const l=document.querySelector("#search-form");l.addEventListener("submit",async e=>{e.preventDefault();const o=document.querySelector("#search").value,{data:s,error:r}=await m(o);if(r)return console.warn("search error",r);u(s),l.reset()});
